/**/_jsload2&&_jsload2('panoramaflash', 'x.extend(Ta.prototype,{ej:function(){for(var a=0;a<A.Fr.length;a++)A.Fr[a](this);this.Uf!=s&&this.dispatchEvent(new O("onvisible_poi_type_changed"),{visiblePOIType:this.Uf});this.vl=this.vh();this.Rr=this.nd=t;this.Rq={};this.md=new tl(this);this.GS();this.tQ();this.vQ();if(this.hb||this.Ob)this.hb?this.Gc(this.hb,this.Oe):this.va(this.Ob)},vQ:function(){var a=this;setInterval(function(){if(a.ac()){var b=a.vh();b.Vb(a.vl)||(a.md.set("size",{width:b.width,height:b.height}),a.vl=b,a.dispatchEvent(new O("size_changed")))}}, 80)},GS:function(){var a=this.md,b=this;a.addEventListener("clicked_position",function(a){b.dispatchEvent(new O("onclicked_position"),a)});a.addEventListener("thumbnail_complete",function(){b.dispatchEvent(new O("onthumbnail_complete"))});a.addEventListener("indoor_enter",function(a){a.data.Q5===s?b.Mj({haveBreakId:t}):b.Mj({haveBreakId:q});b.dispatchEvent(new O("onhaveBreakId_changed"))});a.addEventListener("first_thumb_complete",function(){var a,e;if(b.nd!==q){b.nd=q;a=this;b.hb=a.get("id");"street"!= b.Oe&&(b.Oe="street",b.My("inter"));b.lo=a.get("links");e=a.get("position");b.Ob=e;e=a.get("pov");!b.Oa.heading&&!b.Oa.pitch?b.Oa=e:(e.heading!=b.Oa.heading||e.pitch!=b.Oa.pitch)&&a.set("pov",b.Oa);e=a.get("zoom");1==!b.Rc&&1!=e?b.Rc==e:b.Rc!=e&&a.set("zoom",b.Rc);e=s;for(var f in b.Ne)e=b.Ne[f],delete b.Ne[f],b.Ra(e);b.m.navigationControl===t&&a.set("navigationControlVisible",t);var g=function(b){a.Ls("toggleUI",{topo:b.linksControl,wellLid:b.clickOnRoad,innerExit:t,innerFloor:b.indoorFloorControl})}; g(b.m);b.addEventListener("clickonroad_changed",function(){g(b.m)});b.addEventListener("links_visible_changed",function(){g(b.m)});b.addEventListener("onindoorfloor_options_changed",function(){g(b.m)});b.addEventListener("navigation_visible_changed",function(){a.set("navigationControlVisible",b.m.navigationControl)});if(0<b.kh.length){f=0;for(e=b.kh.length;f<e;f++)b.kh[f].register(b.R,b,b.md);var i="",k=[];f=0;for(e=b.Gr.length;f<e;f++)i=b.Gr[f].aN,k=b.Gr[f].$M,b[i].apply(b,k)}b.m.visible?b.show(): b.aa()}});a.addEventListener("pano_error",function(){b.dispatchEvent(new O("error"))});a.addEventListener("id_changed",function(a){if(b.nd||b.hb==s||"inter"==b.Oe)b.hb=a.data;b.dispatchEvent(new O("onid_changed"))});a.addEventListener("position_changed",function(a){b.nd?b.Ob=b.md.get("position"):b.Ob==s&&(b.Ob=a.data);b.dispatchEvent(new O("onposition_changed"))});a.addEventListener("pov_changed",function(a){if(b.nd||b.Oa.heading==s)b.Oa=a.data;b.dispatchEvent(new O("onpov_changed"))});a.addEventListener("links_changed", function(a){if(b.nd||0==b.lo.length)b.lo=a.data;b.dispatchEvent(new O("onlinks_changed"))});a.addEventListener("zoom_changed",function(a){if(b.nd||b.Rc==s)b.Rc=a.data;b.dispatchEvent(new O("onzoom_changed"))});a.addEventListener("sdata_loaded",function(a){b.My(a.data.panoType);b.dispatchEvent(new O("oncopyright_changed"),{copyright:a.data.copyright});if(b.Rr){for(var e in b.Rq)b[e](b.Rq[e]);b.Rr=t;b.Rq={}}});a.addEventListener("overlay_mouseclick",function(a){a=b.Ne[a.data.markerId];a.dispatchEvent(new O("onclick"), {type:"click",target:a})});a.addEventListener("overlay_mouseover",function(a){a=b.Ne[a.data.markerId];a.dispatchEvent(new O("onmouseover"),{type:"mouseover",target:a})});a.addEventListener("overlay_mouseout",function(a){a=b.Ne[a.data.markerId];a.dispatchEvent(new O("onmouseout"),{type:"mouseout",target:a})})},tQ:function(){var a=this;x.V(this.R,ka.ga.We?"DOMMouseScroll":"onmousewheel",function(b){if(a.m.enableScrollWheelZoom&&a.m.visible){var c=-b.detail/3||b.wheelDelta/120,c=a.la()+c;a.Xc(c);Kb(b)}})}, Gc:function(a,b,c){"object"===typeof b&&(c=b,b=l);if(!this.nd||a&&a!=this.hb)this.nd||(this.hb=a,this.Oe=b||"street",this.Ob=s),this.md.set("id",{id:a,type:b||"street"}),this.Rr=q,c&&c.pov&&this.zd(c.pov)},va:function(a){if(!this.nd||a&&!this.Ob.Vb(a))this.nd||(this.Ob=a,this.hb=s),this.md.set("position",a),this.Rr=q},zd:function(a){a&&(90<a.pitch&&(a.pitch=90),-90>a.pitch&&(a.pitch=-90),this.nd?this.Rr?this.Rq.setPov=a:this.md.set("pov",a):this.Oa=a)},Xc:function(a){a!=this.Rc&&(a>zf&&(a=zf),a<Af&& (a=Af),this.nd?this.md.set("zoom",a):this.Rc=a,this.Rq.setZoom=a)},show:function(){this.m.visible=q;this.If&&(this.P&&this.P.Ta()===this.R)&&x.U.show(this.If);this.md&&this.md.Er&&(this.md.Er.style.left="0");this.nd&&(this.Jl===this.ac()&&this.md.set("id",{id:this.Jl,type:this.US||"street"}),this.dispatchEvent(new O("onvisible_changed")))},aa:function(){this.m.visible=t;this.nd&&(this.Jl=this.hb,this.US=this.Oe,this.md.Ls("closePano"));this.hb=s;this.md&&this.md.Er&&(this.md.Er.style.left="-9999px"); this.dispatchEvent(new O("onvisible_changed"))},XB:function(a){function b(a,b){return function(){a.Gr.push({aN:b,$M:arguments})}}if(this.nd)a.register(this.R,this,this.md);else for(var c=a.getPanoMethodList(),e="",f=0,g=c.length;f<g;f++)e=c[f],this[e]=b(this,e);this.kh.push(a)},fF:function(a){this.nd&&a.dispose();for(var b=this.kh.length;b--;)this.kh[b]===a&&this.kh.splice(b,1)},ju:function(a){this.Uf=a||"none";this.dispatchEvent(new O("onvisible_poi_type_changed"),{visiblePOIType:this.Uf})},Ra:function(a){this.Ne[a.qd]= a;this.nd&&this.dispatchEvent(new O("onadd_overlay"),{overlay:a})},Lb:function(a){var b=a.qd;this.nd&&this.dispatchEvent(new O("onremove_overlay"),{overlay:a});delete this.Ne[b]},mp:function(){var a=this.md.get("indoorData");a&&a.pid&&this.Gc(a.pid)},tF:function(a){this.md.set("interactiveState",a)}});Bk=Ta.prototype; U(Bk,{setId:Bk.Gc,setPosition:Bk.va,setPov:Bk.zd,setZoom:Bk.Xc,show:Bk.show,hide:Bk.aa,addPlugin:Bk.XB,removePlugin:Bk.fF,addOverlay:Bk.Ra,removeOverlay:Bk.Lb,setPanoramaPOIType:Bk.ju,exitInter:Bk.mp,setInteractiveState:Bk.tF});function ul(){this.rT=(this.vA=window.ActiveXObject&&!(window.opera&&!window.opera.nodeType))?\' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"\':\' type="application/x-shockwave-flash"\';this.wI=["id","width","height","align","data"];this.xI="wmode movie flashvars scale quality play loop menu salign bgcolor base allowscriptaccess allownetworking allowfullscreen seamlesstabbing devicefont swliveconnect".split(" ")} x.extend(ul.prototype,{create:function(a,b){var c=this.PR(a);b&&"string"===typeof b&&(b=document.getElementById(b));b?b.innerHTML=c:document.write(c)},remove:function(a){if((a=this.RL(a))&&this.vA){a.style.display="none";for(var b in a)"function"===typeof a[b]&&(a[b]=s);window.vP&&setTimeout(window.vP,0)}a.parentNode.removeChild(a)},LX:function(){function a(){var c=function(){var a=navigator;if(a.plugins&&a.mimeTypes.length){if((a=a.plugins["Shockwave Flash"])&&a.description)return a.description.replace(/([a-zA-Z]|\\s)+/, "").replace(/(\\s)+r/,".")+".0"}else if(b.vA)try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(c)return c.GetVariable("$version").replace(/WIN/g,"").replace(/,/g,".")}catch(g){}}();a=function(){return c};return c}var b=this;return a()},RL:function(a){return document.getElementById(a)},mH:function(a,b){for(var a=a.split("."),b=b.split("."),c=Math.max(a.length,b.length),e=0;e<c;e++){var f=a[e],g=b[e];if(!f||!g)return!f&&!g?0:f?1:-1;f=Number(f);g=Number(g);if(f<g)return-1;if(f>g)return 1}return 0}, PR:function(a){a=a||{};a.movie=a.url||"";a.altHtml=a.errorMessage||"";if(a.vars){var b=a.vars,c=[],e=s,f=s;for(e in b)f=b[e],c.push(e+"="+encodeURIComponent(f));a.flashvars=c.join("&")}a.minVer=a.ver;b=a.minVer;c=a.maxVer;if(b||c)if(e=this.LX(),!e||b&&0>this.mH(e,b)||c&&0<this.mH(e,c))return a.altHtml||"";e=["<object",this.rT];a.data=a.movie;for(b=0;b<this.wI.length;b++)c=this.wI[b],a.hasOwnProperty(c)&&e.push(" ",c,\'="\',a[c],\'"\');e.push(">");for(b=0;b<this.xI.length;b++)c=this.xI[b],a.hasOwnProperty(c)&& e.push(\'<param name="\',c,\'" value="\',a[c],\'"/>\');e.push("</object>");return e.join("")}});function vl(a,b){this.W=a;this.LR=b;this.Xh={};this.Bz()}x.extend(vl.prototype,{Bz:function(){var a=this,b=a.W;b.addEventListener("add_overlay",function(b){b=b.overlay;b.za(a.W,a.LR);a.Xh[b.qd]=b});b.addEventListener("remove_overlay",function(b){b=b.overlay;b.remove();delete a.Xh[b.qd]})}});x.extend(Ef.prototype,{za:function(a,b){this.W=a;this.ma()||this.va(this.W.ma());this.Ha=b;this.ob()},ob:function(){var a=this.ma(),a=ad.ae.Lg(a),a={markerId:this.qd,catalog:"FD01",name:this.Kk(),rank:this.pp(),x:a.x,y:a.y,color:this.Om(),hoverColor:this.gM,backgroundHoverColor:this.eK,borderColor:this.borderColor,borderHoverColor:this.iK,backgroundColor:this.backgroundColor,padding:this.padding,fontSize:this.fontSize,borderWidth:this.borderWidth};if(this.jE||this.getImageData())a.imageUrl=this.jE, a.imageData=this.getImageData(),a.size=this.wb(),a.image=this.wx(),a.catalog="FD02",this.wb()&&(a.width=this.wb()[0],a.height=this.wb()[1]);this.Ha.SN(a)},hide:function(){this.Xa=t;this.Ha&&this.Ha.Xo(this.qd,"visible",t)},show:function(){this.Xa=q;this.Ha&&this.Ha.Xo(this.qd,"visible",q)},isVisible:u("Xa"),Tf:function(a,b){this.Ha&&("position"==a&&(b=ad.ae.Lg(b),b={lng:b.x,lat:b.y}),this.Ha.Xo(this.qd,a,b))},remove:function(){this.dispatchEvent(new O("onremove"),{type:"remove",target:this});this.Ha.JK([this.qd])}});var wl={none:"",transit:"FE0A",hotel:"FE02",catering:"FE01",movie:"FE06",indoor_scene:"FEFE"},xl={none:["-1",""],transit:["0","m_transit.png"],hotel:["1","m_hotel.png"],catering:["2","m_catering.png"],movie:["3","m_movie.png"],transit:["4","m_transit.png"],indoor_scene:["5","m_indoor_scene.png"]}; x.extend(Hf.prototype,{za:function(a,b){this.W=a;this.Ha=b;this.ob()},ob:function(){var a=this.ma(),a=ad.ae.Lg(a),b=this.hS(),c=this.UD();this.Ha.SN({markerId:this.qd,catalog:b,name:this.zp(),rank:this.pp(),x:a.x,y:a.y,heading:c.heading,pitch:c.pitch,pid:c.panoId,panoIId:c.panoIId})},hS:function(){var a=this.sp().match(/.*\\/(.*)/)[1],b;for(b in xl)if(xl[b][1]==a)return wl[b]},hide:function(){this.Xa=t;this.Ha.Xo(this.qd,"visible",t)},show:function(){this.Xa=q;this.Ha.Xo(this.qd,"visible",q)},isVisible:u("Xa"), Tf:function(a,b){"position"==a&&(b=ad.ae.Lg(b),b={lng:b.x,lat:b.y});this.Ha.Xo(this.qd,a,b)},remove:function(){this.dispatchEvent(new O("onremove"),{type:"remove",target:this});this.Ha.JK([this.qd])}});tl.to=new ad(s,{Xe:"api"});function tl(a){x.lang.Ja.call(this);a&&(this.W=a,this.bh=s,this.zH=a.R.clientWidth,this.yH=a.R.clientHeight,new vl(a,this))}tl.WP=A.xh("pano");x.lang.xa(tl,x.lang.Ja,"PanoramaFlashWraper"); x.extend(tl.prototype,{SN:function(a){this.Ls("addMarkers",[a])},JK:function(a){this.Ls("removeMarkers",[a])},Xo:function(a,b,c){var e={};e.markerId=a;e[b]=c;this.set("markerProperty",e)},get:function(a){var b=s;"position"==a?(b=this.bh.get("mercatorPosition"),b=ad.ae.Kj(new Q(b.mercatorX,b.mercatorY))):b=this.bh.get(a);return b},set:function(a,b){var c=this;"position"==a?tl.to.zj(b,function(a){a&&a.id?c.W.Gc(a.id):c.dispatchEvent(new O("pano_error"))}):"id"==a?c.bh==s?c.NS(c.W):c.bh.set&&c.bh.set("panoOptions", {id:b.id,panoType:b.type,width:c.zH,height:c.yH}):c.bh&&c.bh.set&&c.bh.set(a,b)},Ls:function(a,b){return this.bh.doAction(a,b)},f4:u("Er"),NS:function(a){var b=this,c=a.m.swfSrc.match(/.*\\//)[0]+"BDStreetScape.swf";b.bh=q;tl.to.Ex(function(e){var f="",g="";"inter"===a.Oe?g=a.hb:f=a.hb;f={pid:f,iid:g,panoType:a.Oe,heading:a.Oa.heading,pitch:a.Oa.pitch,width:b.zH,height:b.yH,panoUrl:c,panoTileUrl:tl.WP.join("|"),domain:ad.Tu,jsInterfaceNamespace:"BMap.PanoramaFlashInterface",swfIndex:b.da};g=a.m.swfSrc; e&&(e.panoUdt&&e.panoUdt.version&&f)&&(f.udtVersion=e.panoUdt.version);e&&(e.panoSwfAPI&&e.panoSwfAPI.version&&f)&&(f.panoUrl=f.panoUrl+"?version="+e.panoSwfAPI.version,g=g+"?version="+e.panoSwfAPI.version);b.bh=b.gR(a.R,f,g)})},gR:function(a,b,c){var e=new ul,f="PanoramaFlash"+this.da,g=s,g=F("div");g.style.position="absolute";g.id="PanoramaFlashWraper"+this.da;g.style.top="0";g.style.left="0";g.style.height="100%";g.style.width="100%";g.style.zIndex=1200;this.Er=g;a.appendChild(g);e.create({id:f, width:"100%",height:"100%",allowscriptaccess:"always",scale:"showall",wmode:"opaque",quality:"best",url:c,ver:"10.2",errorMessage:"\\u60a8\\u672a\\u5b89\\u88c5Flash Player\\u64ad\\u653e\\u5668\\u6216\\u8005\\u7248\\u672c\\u8fc7\\u4f4e",vars:b},g);return e.RL(f)}});var yl=tl.prototype;U(yl,{get:yl.get,set:yl.set,doAction:yl.Ls}); ');